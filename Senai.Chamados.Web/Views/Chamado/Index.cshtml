
@model Senai.Chamados.Web.ViewModels.Chamado.ListaChamadoViewModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutPage.cshtml";
}
@section Styles{
    <link href="https://getbootstrap.com/docs/4.0/examples/starter-template/starter-template.css" rel="stylesheet" />
}
<div class="jumbotron">
    <div class="container">
        <h1>Chama ai no Whatz</h1>
        <p>OLHA OS BAGULHOS AI #$%$##</p>
        <p><a href="/Chamado/Cadastrar" class="btn btn-lg btn-primary" role="button">Criar Chamado</a></p>
    </div>
</div>

<h2>Tela de Chamados</h2>
@if (TempData["Erro"] != null)
{
    <div class="alert alert-danger">
        @TempData["Erro"]
    </div>
}
@if (TempData["Sucesso"] != null)
{
    <div class="alert alert-success">
        @TempData["Sucesso"]
    </div>
}
<table class="table">
    <thead>
        <tr>
            <th>Título</th>
            <th>Setor</th>
            <th>Status</th>
            <th>Data Criação</th>
            @*<th>
                    <a href="/Chamado/Cadastrar" class="btn btn-primary">Cadastrar</a>
                </th>*@
        </tr>
    </thead>
    <tbody>
        @foreach (var chamado in Model.ListaChamados)
        {
            <tr>
                <td>@Html.DisplayFor(x => chamado.Titulo)</td>
                <td>@Html.DisplayFor(x => chamado.Setor)</td>
                <td>@Html.DisplayFor(x => chamado.Status)</td>
                <td>@Html.DisplayFor(x => chamado.DataCriacao)</td>
                <td class="text-center">
                    <a class="btn btn-primary" href="/Chamado/Editar/@chamado.Id"><i class="glyphicon glyphicon-edit"> </i></a>&nbsp;&nbsp;

                    @if (User.IsInRole("Administrador"))
                    {
                        <a class="btn btn-danger" href="/Chamado/Excluir/@chamado.Id"><i class="glyphicon glyphicon-trash"> </i></a>
                    }
                </td>
            </tr>
        }
    </tbody>
</table>
